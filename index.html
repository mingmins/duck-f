<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ì˜¤ë¦¬ì¡ê¸°</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Hi+Melody&display=swap" rel="stylesheet">

    <style type="text/css">
        .lilita-one-regular {
            font-family: "Lilita One", sans-serif;
            font-weight: 400;
            font-style: normal;
        }
        .hi-melody-regular {
            font-family: "Hi Melody", sans-serif;
            font-weight: 400;
            font-style: normal;
        }
        .wrap {
            width: 800px; 
            margin:0; 
            padding-top: 20%; 
            padding-left:5%; 
        }
        .flex { display: flex; }
        .bg_f { display:block; position:relative; width: 33.3%; height: 400px; }
        .bg_f img { width: 100%; height: auto; }
        .r { position: absolute; left:0px; top:0px; width: 266px; height: auto; }
        .item1:hover .r, .item2:hover .r, .item3:hover .r { display: none; }
        body {
            margin: 0; padding: 0;
            overflow: hidden;
            background-image: url('back.jpg');
            background-size: 100% auto;
            background-repeat: no-repeat;
            background-position: center;
        }
        h1 { 
            font-family: "Lilita One", sans-serif;
            font-size: 100px;
            color: orange;
            margin: 0;
            padding-top: 5%;
            padding-left: 5%;
            padding-bottom: 1%;
            text-shadow: -2px 0 #000, 0 2px #000, 2px 0 #000, 0 -2px #000;
            position: absolute;
            z-index: 1; /* í•­ìƒ ë³´ì´ê²Œ ìˆ˜ì • */
        }
        p1 { 
            padding-left: 6%;
            padding-bottom: 5%;
            font-family: "Hi Melody", sans-serif;
            font-size: 25px;
            position: absolute;
            top: 200px;
            left: 20px;
            z-index: 1; /* í•­ìƒ ë³´ì´ê²Œ ìˆ˜ì • */
        }
        .box {
            width: 190px;
            height: 190px;
            position: absolute;
            background-image: url('mom.png');
            background-size: cover;
            z-index: 10;
        }
        .mon {
            width: 130px;
            height: 130px;
            position: absolute;
            background-image: url('monster.png');
            background-size: cover;
            z-index: 10;
        }
        #popup {
            font-family: "Hi Melody", sans-serif;
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 50px;
            text-align: center;
            padding-top: 200px;
            padding-bottom: 10px;
            z-index: 9999;
            cursor: pointer;
        }

        #resetButtonSuccess {
            font-family: "Hi Melody", sans-serif;
            background:orange;
            border: 3px;
            color:white;
            font-size: 20px;
            outline: none;

        }


        #resetButtonFail {
            font-family: "Hi Melody", sans-serif;
            background:orange;
            border: 3px;
            color:white;
            font-size: 20px;
            outline: none;

        }


        /* ì‹¤íŒ¨ íŒì—… ìŠ¤íƒ€ì¼ */
        #failPopup {
            font-family: "Hi Melody", sans-serif;
            display: none;
            position: fixed;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 50px;
            text-align: center;
            padding-top: 200px;
            padding-bottom: 10px;
            z-index: 9999;
        }



        /* ì»¤ì„œë¥¼ ë”°ë¼ì˜¤ëŠ” í…ìŠ¤íŠ¸ */
        #movingText {
            position: absolute;
            font-size: 24px;
            font-family: 'Hi Melody', sans-serif;
            color: blue;
            z-index: 999;
            pointer-events: none;
        }




    </style>
</head>
<body>

    <!-- ì»¤ì„œë¥¼ ë”°ë¼ë‹¤ë‹ˆëŠ” í…ìŠ¤íŠ¸ ì¶”ê°€ -->
    <div id="movingText">ê½¥ê½¥ê½¦ê½¥ê½¦ê½¥<br>ê½¥ê½¥ê½¦ê½¥ê½¦ê½¥</div>

    <!-- í™”ë©´ì— ì—¬ëŸ¬ ë°•ìŠ¤ ë°°ì¹˜ -->
    <div class="box" style="left: 50px; top: 200px;"></div>

    <!-- íŒì—…ì°½ -->
    <div id="popup">
        ğŸ¥ğŸ¥ğŸ¥ğŸ¥ğŸ¥ğŸ¥<br>ì—„ë§ˆ ì˜¤ë¦¬ê°€ ì•„ê¸°ì˜¤ë¦¬ë“¤ì„ ë‹¤ ëª¨ì•˜ì–´ìš”! <br>
        <button id="resetButtonSuccess">ì˜¤ë¦¬ ëª¨ìœ¼ëŸ¬ ê°€ê¸°</button> 
    </div>


    <!-- ì‹¤íŒ¨ íŒì—…ì°½ ì¶”ê°€ -->
<div id="failPopup">
    ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘<br>ì•„ê¸° ì˜¤ë¦¬ë¥¼ ë‹¤ ëª¨ìœ¼ì§€ ëª»í–ˆìŠµë‹ˆë‹¤! <br>
    ë‹¤ì‹œ ì‹œë„í•´ë³´ì„¸ìš”! <br>
    <button id="resetButtonFail">ì˜¤ë¦¬ ëª¨ìœ¼ëŸ¬ ê°€ê¸°</button> 
</div>

    <!-- ì œëª©ê³¼ ì•ˆë‚´ë¬¸ ì¶”ê°€ -->
    <h1>Catch the duckling!</h1>
    <p1>ì—„ë§ˆ ì˜¤ë¦¬ë¥¼ í´ë¦­í•˜ê³  ë°©í–¥í‚¤ë¡œ ì›€ì§ì—¬ ì—¬ê¸°ì €ê¸° í©ì–´ì§„ ì•„ê¸° ì˜¤ë¦¬ë“¤ì„ ëª¨ì•„ì£¼ì„¸ìš”</p1>


    <div id="monsterCount" style="position: absolute; top: 10px; right: 20px; font-size: 20px; font-family: Hi Melody; color: white; background: blue;">
        ì—„ë§ˆë‘ ë§Œë‚œ ì˜¤ë¦¬: <span id="caughtMonsters">0</span> / ë„ë§ê°€ëŠ” ì˜¤ë¦¬: <span id="remainingMonsters">6</span>
    </div>


    <!-- íƒ€ì´ë¨¸ ì¶”ê°€ -->
<div id="timer" style="position: absolute; top: 10px; left: 20px; font-size: 20px; font-family: 'Hi Melody'; color: white; background: orange;">
   ë‚¨ì€ ì‹œê°„: 20
</div>

    <div class="wrap flex">
        <a class="bg_f item1"> 
            <img src="b1.jpg">
            <img class="r" src="a1.jpg">
        </a>
        <a class="bg_f item2">
            <img src="b2.jpg">
            <img class="r" src="a2.jpg">
        </a>
        <a class="bg_f item3">
            <img src="b3.jpg">
            <img class="r" src="a3.jpg"> 
        </a>
    </div>

    <!-- ì˜¤ë””ì˜¤ ìš”ì†Œ ì¶”ê°€ -->
    <audio id="catchSound" src="toyduck.mp3" preload="auto"></audio>

    <script type="text/javascript">
        let activeBox = null;
        let monPosition = [];
        let monNum = 6;
        let caughtNum = 0;
        let caughtMonsters = []; // ì¡íŒ ëª¬ìŠ¤í„°ë“¤ì„ ì¶”ì 
        let spacing = 50; // ê° ëª¬ìŠ¤í„°ê°€ ë°•ìŠ¤ ì˜†ì— ì–¼ë§ˆë‚˜ ë–¨ì–´ì ¸ ìˆì„ì§€ ê°„ê²© ì„¤ì •
        let timeLimit = 30; // ì œí•œ ì‹œê°„ 30ì´ˆ
        let timerInterval;  // íƒ€ì´ë¨¸ë¥¼ ìœ„í•œ ë³€ìˆ˜

       function startTimer() {
    let timeLeft = timeLimit;
    document.getElementById('timer').innerText = `ë‚¨ì€ì‹œê°„: ${timeLeft}ì´ˆ`;

    timerInterval = setInterval(function() {
        timeLeft--;
        document.getElementById('timer').innerText = `ë‚¨ì€ì‹œê°„: ${timeLeft}ì´ˆ`;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            if (caughtNum < monNum) {
                showFailPopup();
            }
        }
    }, 1000);
}

        // ë§ˆìš°ìŠ¤ ì›€ì§ì„ì— ë”°ë¼ í…ìŠ¤íŠ¸ ì´ë™
        document.addEventListener('mousemove', function(event) {
            let movingText = document.getElementById('movingText');
            movingText.style.left = event.pageX + 10 + 'px';
            movingText.style.top = event.pageY + 10 + 'px';
        });

        function updateMonsterCount() {
            document.getElementById('caughtMonsters').innerText = caughtNum;
            document.getElementById('remainingMonsters').innerText = monNum - caughtNum;
        }

        function createMon(i) {
            let monster = document.createElement("div");
            monster.className = "mon";
            monster.id = "mon" + i;

            let monX = Math.random() * (innerWidth - 100) / 100;
            let monY = Math.random() * (innerHeight - 100) / 100;
            let mX = monX.toFixed(0) * 100;
            let mY = monY.toFixed(0) * 100;

            monPosition.push([mX, mY, monster.id]);
            monster.style.left = mX + "px";
            monster.style.top = mY + "px";
            document.body.appendChild(monster);
        }

        function moveMonsters() {
            const maxX = window.innerWidth - 150; 
            const maxY = window.innerHeight - 130; 

            monPosition.forEach((mon, index) => {
                let monster = document.getElementById(mon[2]);
                let direction = Math.floor(Math.random() * 4);

                let newX = mon[0];
                let newY = mon[1];

                if (direction === 0 && newX > 0) { 
                    newX -= 100;
                } else if (direction === 1 && newX < maxX) { 
                    newX += 100;
                } else if (direction === 2 && newY > 0) { 
                    newY -= 100;
                } else if (direction === 3 && newY < maxY) { 
                    newY += 100;
                }

                if (newX >= 0 && newX <= maxX) {
                    mon[0] = newX; 
                }
                if (newY >= 0 && newY <= maxY) {
                    mon[1] = newY; 
                }

                monster.style.left = mon[0] + "px";
                monster.style.top = mon[1] + "px";
            });
        }

        const boxes = document.querySelectorAll('.box');
        boxes.forEach(box => {
            box.xplot = parseInt(box.style.left);
            box.yplot = parseInt(box.style.top);

            box.onclick = function() {
                activeBox = box;
            }
        });

        document.onkeydown = function(e) {
            let a = e.keyCode;
            if (activeBox) {
                if (a == 38) { activeBox.yplot -= 50; activeBox.style.top = activeBox.yplot + "px"; }
                if (a == 40) { activeBox.yplot += 50; activeBox.style.top = activeBox.yplot + "px"; }
                if (a == 39) { activeBox.xplot += 50; activeBox.style.left = activeBox.xplot + "px"; }
                if (a == 37) { activeBox.xplot -= 50; activeBox.style.left = activeBox.xplot + "px"; }

                caughtMonsters.forEach((monster, index) => {
                    monster.style.left = activeBox.xplot - spacing * (index + 1) + "px";
                    monster.style.top = activeBox.yplot + "px";
                });

                monPosition.forEach((mon, index) => {
                    if (activeBox.xplot == mon[0] && activeBox.yplot == mon[1]) {
                        //alert("ì•„ê¸° ì˜¤ë¦¬ë¥¼ ì¡ì•˜ì–´ìš”!");
                        let caughtMonster = document.getElementById(mon[2]);

                        caughtMonsters.push(caughtMonster);
                        caughtMonster.style.position = 'absolute';
                        caughtMonster.style.zIndex = '999';

                        monPosition.splice(index, 1);
                        caughtNum++;
                        updateMonsterCount();

                        document.getElementById('catchSound').play();

                        showCatchText(); {
                            if (!activeBox) return {}
                        }

                        if (monPosition.length === 0) {
                            showPopup();
                        }
                    }
                });
            }
        }


        function showCatchText() {

    if (!activeBox) return;

            let catchText = document.createElement("div");
            catchText.innerText = "ì¡ì•˜ë‹¤!";
            catchText.style.position = "absolute";
            catchText.style.left = `${activeBox.xplot + 20}px`; // ë°•ìŠ¤ì˜ ì•½ê°„ ì˜¤ë¥¸ìª½
            catchText.style.top = `${activeBox.yplot - 20}px`; // ë°•ìŠ¤ì˜ ì•½ê°„ ìœ„ìª½
            catchText.style.fontSize = "30px";
            catchText.style.color = "blue";
            catchText.style.fontFamily = "'Hi Melody', sans-serif";
            catchText.style.zIndex = "1000";
            catchText.style.pointerEvents = "none"; // ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ê°€ ì°¨ë‹¨ë˜ë„ë¡ ì„¤ì •

            // bodyì— í…ìŠ¤íŠ¸ ì¶”ê°€
            document.body.appendChild(catchText);

            // 1ì´ˆ í›„ í…ìŠ¤íŠ¸ ì œê±°
            setTimeout(() => {
                catchText.remove();
            }, 1000);
        }



        function showPopup() {
            let popup = document.getElementById('popup');
            popup.style.display = 'block';
        }

        // ì‹¤íŒ¨ íŒì—… í‘œì‹œ
function showFailPopup() {
    let failPopup = document.getElementById('failPopup');
    failPopup.style.display = 'block';
}


        // ì‹¤íŒ¨ íŒì—… ë‹«ê¸° ê¸°ëŠ¥
document.getElementById('failPopup').onclick = function() {
    this.style.display = 'none';
}

       // ë¦¬ì…‹ ë²„íŠ¼ í´ë¦­ ì‹œ ê²Œì„ì„ ì´ˆê¸°í™”í•˜ëŠ” í•¨ìˆ˜
function resetGame() {
    monPosition = [];
    caughtNum = 0;
    caughtMonsters = [];
    activeBox = null;
    clearInterval(timerInterval);  // ì´ì „ íƒ€ì´ë¨¸ ì¤‘ì§€

           // í™”ë©´ì— ìˆëŠ” ëª¬ìŠ¤í„°ë“¤ì„ ëª¨ë‘ ì œê±°
    document.querySelectorAll('.mon').forEach(monster => monster.remove());

    // ìƒˆë¡œ ëª¬ìŠ¤í„° ìƒì„±
    for (let i = 0; i < monNum; i++) {
        createMon(i);
    }

    updateMonsterCount();
    startTimer();  // íƒ€ì´ë¨¸ ë‹¤ì‹œ ì‹œì‘
    document.getElementById('popup').style.display = 'none';
    document.getElementById('failPopup').style.display = 'none';  // ì‹¤íŒ¨ íŒì—… ìˆ¨ê¸°ê¸°
}

        for (let i = 0; i < monNum; i++) {
            createMon(i);
        }

        setInterval(moveMonsters, 1500);
        updateMonsterCount();
        startTimer()


        // ì„±ê³µ íŒì—…ì˜ ë¦¬ì…‹ ë²„íŠ¼ ì´ë²¤íŠ¸
document.getElementById('resetButtonSuccess').onclick = function() {
    resetGame();
};

// ì‹¤íŒ¨ íŒì—…ì˜ ë¦¬ì…‹ ë²„íŠ¼ ì´ë²¤íŠ¸
document.getElementById('resetButtonFail').onclick = function() {
    resetGame();
};
    </script>
</body>
</html>
